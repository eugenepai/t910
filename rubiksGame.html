<!DOCTYPE html>
<html>
<head>
    <title>Rubik's Cube Everywhere! --- WCA Rules</title>
    <meta charset="utf-8">
    <script src="https://code.jquery.com/jquery-1.12.4.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/animejs/2.0.2/anime.min.js"></script>
    <style>
        /* basic css properties*/
        html {  touch-action: manipulation; }
        table {table-layout:fixed; }
        .beHidden {display:none;}
        .noBorder {border:none; border-width:0;}
        /* table head setting*/
        .tbl {border:2px white solid; width:100%; height:100%; table-layout:fixed; font-family: Arial;}
        .tbltr12 {text-align:center; font-weight:bolder;color:white}
        .tbltr3 {font-size:1.5vw; line-height:1.5vw;text-align:center;font-weight:bold;color:white;}
        /*Game control button setting*/
        .plainCtrl {color:black; background-color:lightgray; border: 2px solid black; border-radius:5px; 
                    width:6em; height:2.5em;  }
        .roundEdge {color:blue; background-color:lightgray; border: 1px solid black; border-radius:5px;
                    padding:3px 10px; font-weight:bolder; }
        .W-CCW  {background: -webkit-linear-gradient(0deg,gray,white); }
        .W-CW   {background: -webkit-linear-gradient(180deg,gray,white); }
        .B-CCW  {background: -webkit-linear-gradient(right,white,Blue); }
        .B-CW   {background: -webkit-linear-gradient(left,white,blue); }
        .G-CCW  {background: -webkit-linear-gradient(right,white,green); }
        .G-CW   {background: -webkit-linear-gradient(left,white,green); }
        .R-CCW  {background: -webkit-linear-gradient(right,white,red); }
        .R-CW   {background: -webkit-linear-gradient(left,white,red); }
        .O-CCW  {background: -webkit-linear-gradient(right,white,orange); }
        .O-CW   {background: -webkit-linear-gradient(left,white,orange); }
        .Y-CCW  {background: -webkit-linear-gradient(right,white,yellow); }
        .Y-CW   {background: -webkit-linear-gradient(left,white,yellow); }
        .btHd {color:white; font-size:1.2vw; font-weight:bold; vertical-align:middle; text-align:center; margin:5%; }
        .subTitle {font-size:1.2vw; font-weight:bold; color:white;}
        .borderTop {border: 1px white solid; border-width:1px 0 0 0; }
        .centerText {text-align:center; }
        .rightText {text-align:right; }
        /* ============================== cube setting ================================= */
        .cubeClass {
            position:relative; -webkit-position:relative; 
            z-index:1;
            -webkit-overflow-scrolling: auto !important;
            width:100px; height: 100px; display:block; margin:270px auto 180px auto; 
            perspective:none;    -webkit-perspective:none;
            transform-style: preserve-3d;    -webkit-transform-style: preserve-3d;
            transform: rotate3d(1,1,0,-30deg) rotate3d(1,0,0,90deg) ; -webkit-transform: rotate3d(1,1,0,-30deg) rotate3d(1,0,0,90deg) ;
            transition: all 350ms linear; -webkit-transition: all 350ms linear;
             }
        .cubeClass div {
            position:absolute; -webkit-position:absolute;
            z-index:1;
            -webkit-overflow-scrolling: auto !important;
            box-sizing: border-box;
            width:100%; height:100%;
            margin:0;
            transform-style:preserve-3d;    -webkit-transform-style:preserve-3d; 
            font-size:xx-large ; }
        /* unit cube: shape */
        .ucSticker {border: solid gray 4px; border-radius:20px;}
        .ucShape {border: solid cyan 4px; border-radius:2px; box-sizing: border-box; background-color: violet;}
        
        /* unit cube: color attributes  */
        .red {background-color: red; }
        .orange {background-color: orange; }
        .green {background-color: green; }
        .blue {background-color: blue; }
        .white {background-color: white; }
        .yellow {background-color: yellow; }
        .black {background-color: black; }

        /* unit cube: position setting of 6 faces */
        /*matrix3d座標軸方向: X:(藍色right(+X)螢幕平面之右、Z:(白色up(+Z)螢幕平面之上、Y:(紅色front(+Y)垂直螢幕出來向自己方向 
        X90=[1,0,0,0,   0,0,-1,0,   0,1,0,0,    0,0,0,1];   Xn90=[1,0,0,0,   0,0,1,0,    0,-1,0,0,   0,0,0,1];
        Y90=[0,0,1,0,   0,1,0,0,    -1,0,0,0,   0,0,0,1];   Yn90=[0,0,-1,0,  0,1,0,0,    1,0,0,0,    0,0,0,1];
        Z90=[0,-1,0,0,  1,0,0,0,    0,0,1,0,    0,0,0,1];   Zn90=[0,1,0,0,   -1,0,0,0,   0,0,1,0,    0,0,0,1];

        X180=[1,0,0,0,   0,-1,0,0,   0,0,-1,0,  0,0,0,1];  UnitM = [1,0,0,0,  0,1,0,0,  0,0,1,0,  0,0,0,1];
        Y180=[-1,0,0,0,  0,1,0,0,    0,0,-1,0,  0,0,0,1];
        Z180=[-1,0,0,0,  0,-1,0,0,   0,0,1,0,   0,0,0,1];
        */
        
        /*cube face setting */
        .fsUp   {-webkit-transform: matrix3d(1,0,0,0,   0,1,0,0,   0,0,1,0,   0,0,+50,1);
                         transform: matrix3d(1,0,0,0,   0,1,0,0,   0,0,1,0,   0,0,+50,1); } /* X轉0, Z移+50 */
        .fsDown {-webkit-transform: matrix3d(1,0,0,0,   0,-1,0,0,  0,0,-1,0,  0,0,-50,1);
                         transform: matrix3d(1,0,0,0,   0,-1,0,0,  0,0,-1,0,  0,0,-50,1); } /* X轉180, Z移-50 */
        /*test*/
        .fsFront{-webkit-transform: matrix3d(1,0,0,0,   0,1,0,0,   0,0,1,0,   0,+0,0,1);
                         transform: matrix3d(1,0,0,0,   0,1,0,0,   0,0,1,0,   0,+0,0,1); } /* X轉+90, Y移+50 */        
         /*.fsFront{-webkit-transform: matrix3d(1,0,0,0,   0,0,-1,0,  0,1,0,0,   0,+50,0,1);
                         transform: matrix3d(1,0,0,0,   0,0,-1,0,  0,1,0,0,   0,+50,0,1); }*/
        .fsBack {-webkit-transform: matrix3d(1,0,0,0,   0,0,1,0,   0,-1,0,0,  0,-50,0,1);
                         transform: matrix3d(1,0,0,0,   0,0,1,0,   0,-1,0,0,  0,-50,0,1); } /* X轉-90, Y移-50 */
        
        .fsLeft {-webkit-transform: matrix3d(0,0,1,0,   0,1,0,0,   -1,0,0,0,  -50,0,0,1);
                         transform: matrix3d(0,0,1,0,   0,1,0,0,   -1,0,0,0,  -50,0,0,1); } /* Y轉+90, X移-50 */
        
        .fsRight{-webkit-transform: matrix3d(0,0,-1,0,  0,1,0,0,   1,0,0,0,   +50,0,0,1); 
                         transform: matrix3d(0,0,-1,0,  0,1,0,0,   1,0,0,0,   +50,0,0,1); } /* Y轉-90, X移+50 */

        /* 1st_Layer of 27 unit cubes*/
        .classCube01 {-webkit-transform: matrix3d(1,0,0,0,   0,1,0,0,   0,0,1,0,   -100,   +100,   +100,   1);
                              transform: matrix3d(1,0,0,0,   0,1,0,0,   0,0,1,0,   -100,   +100,   +100,   1);}
        .classCube02 {-webkit-transform: matrix3d(1,0,0,0,   0,1,0,0,   0,0,1,0,   0,      +100,   +100,   1);
                              transform: matrix3d(1,0,0,0,   0,1,0,0,   0,0,1,0,   0,      +100,   +100,   1);}
        .classCube03 {-webkit-transform: matrix3d(1,0,0,0,   0,1,0,0,   0,0,1,0,   +100,   +100,   +100,   1);
                              transform: matrix3d(1,0,0,0,   0,1,0,0,   0,0,1,0,   +100,   +100,   +100,   1);}
        .classCube04 {-webkit-transform: matrix3d(1,0,0,0,   0,1,0,0,   0,0,1,0,   -100,   0,      +100,   1);
                              transform: matrix3d(1,0,0,0,   0,1,0,0,   0,0,1,0,   -100,   0,      +100,   1);}
        .classCube05 {-webkit-transform: matrix3d(1,0,0,0,   0,1,0,0,   0,0,1,0,   0,      0,      +100,   1);
                              transform: matrix3d(1,0,0,0,   0,1,0,0,   0,0,1,0,   0,      0,      +100,   1);}
        .classCube06 {-webkit-transform: matrix3d(1,0,0,0,   0,1,0,0,   0,0,1,0,   +100,   0,      +100,   1);
                              transform: matrix3d(1,0,0,0,   0,1,0,0,   0,0,1,0,   +100,   0,      +100,   1);}
        .classCube07 {-webkit-transform: matrix3d(1,0,0,0,   0,1,0,0,   0,0,1,0,   -100,   -100,   +100,   1);
                              transform: matrix3d(1,0,0,0,   0,1,0,0,   0,0,1,0,   -100,   -100,   +100,   1);}
        .classCube08 {-webkit-transform: matrix3d(1,0,0,0,   0,1,0,0,   0,0,1,0,   0,      -100,   +100,   1);
                              transform: matrix3d(1,0,0,0,   0,1,0,0,   0,0,1,0,   0,      -100,   +100,   1);}
        .classCube09 {-webkit-transform: matrix3d(1,0,0,0,   0,1,0,0,   0,0,1,0,   +100,   -100,   +100,   1);
                              transform: matrix3d(1,0,0,0,   0,1,0,0,   0,0,1,0,   +100,   -100,   +100,   1);}
        /* 2nd_Layer of 27 unit cubes*/
        .classCube11 {-webkit-transform: matrix3d(1,0,0,0,   0,1,0,0,   0,0,1,0,   -100,   +100,   0.0001,   1);
                              transform: matrix3d(1,0,0,0,   0,1,0,0,   0,0,1,0,   -100,   +100,   0.0001,   1);}
        .classCube12 {-webkit-transform: matrix3d(1,0,0,0,   0,1,0,0,   0,0,1,0,   0,      +100,   0.0001,   1);
                              transform: matrix3d(1,0,0,0,   0,1,0,0,   0,0,1,0,   0,      +100,   0.0001,   1);}
        .classCube13 {-webkit-transform: matrix3d(1,0,0,0,   0,1,0,0,   0,0,1,0,   +100,   +100,   0.0001,   1);
                              transform: matrix3d(1,0,0,0,   0,1,0,0,   0,0,1,0,   +100,   +100,   0.0001,   1);}
        .classCube14 {-webkit-transform: matrix3d(1,0,0,0,   0,1,0,0,   0,0,1,0,   -100,   0,      0.0001,   1);
                              transform: matrix3d(1,0,0,0,   0,1,0,0,   0,0,1,0,   -100,   0,      0.0001,   1);}
        .classCube15 {-webkit-transform: matrix3d(1,0,0,0,   0,1,0,0,   0,0,1,0,   0,      0,      0.0001,   1);
                              transform: matrix3d(1,0,0,0,   0,1,0,0,   0,0,1,0,   0,      0,      0.0001,   1);}
        .classCube16 {-webkit-transform: matrix3d(1,0,0,0,   0,1,0,0,   0,0,1,0,   +100,   0,      0.0001,   1);
                              transform: matrix3d(1,0,0,0,   0,1,0,0,   0,0,1,0,   +100,   0,      0.0001,   1);}
        .classCube17 {-webkit-transform: matrix3d(1,0,0,0,   0,1,0,0,   0,0,1,0,   -100,   -100,   0.0001,   1);
                              transform: matrix3d(1,0,0,0,   0,1,0,0,   0,0,1,0,   -100,   -100,   0.0001,   1);}
        .classCube18 {-webkit-transform: matrix3d(1,0,0,0,   0,1,0,0,   0,0,1,0,   0,      -100,   0.0001,   1);
                              transform: matrix3d(1,0,0,0,   0,1,0,0,   0,0,1,0,   0,      -100,   0.0001,   1);}
        .classCube19 {-webkit-transform: matrix3d(1,0,0,0,   0,1,0,0,   0,0,1,0,   +100,   -100,   0.0001,   1);
                              transform: matrix3d(1,0,0,0,   0,1,0,0,   0,0,1,0,   +100,   -100,   0.0001,   1);}
        /* 3rd_Layer of 27 unit cubes*/
        .classCube21 {-webkit-transform: matrix3d(1,0,0,0,   0,1,0,0,   0,0,1,0,   -100,   +100,   -100,   1);
                              transform: matrix3d(1,0,0,0,   0,1,0,0,   0,0,1,0,   -100,   +100,   -100,   1);}
        .classCube22 {-webkit-transform: matrix3d(1,0,0,0,   0,1,0,0,   0,0,1,0,   0,      +100,   -100,   1);
                              transform: matrix3d(1,0,0,0,   0,1,0,0,   0,0,1,0,   0,      +100,   -100,   1);}
        .classCube23 {-webkit-transform: matrix3d(1,0,0,0,   0,1,0,0,   0,0,1,0,   +100,   +100,   -100,   1);
                              transform: matrix3d(1,0,0,0,   0,1,0,0,   0,0,1,0,   +100,   +100,   -100,   1);}
        .classCube24 {-webkit-transform: matrix3d(1,0,0,0,   0,1,0,0,   0,0,1,0,   -100,   0,      -100,   1);
                              transform: matrix3d(1,0,0,0,   0,1,0,0,   0,0,1,0,   -100,   0,      -100,   1);}
        .classCube25 {-webkit-transform: matrix3d(1,0,0,0,   0,1,0,0,   0,0,1,0,   0,      0,      -100,   1);
                              transform: matrix3d(1,0,0,0,   0,1,0,0,   0,0,1,0,   0,      0,      -100,   1);}
        .classCube26 {-webkit-transform: matrix3d(1,0,0,0,   0,1,0,0,   0,0,1,0,   +100,   0,      -100,   1);
                              transform: matrix3d(1,0,0,0,   0,1,0,0,   0,0,1,0,   +100,   0,      -100,   1);}
        .classCube27 {-webkit-transform: matrix3d(1,0,0,0,   0,1,0,0,   0,0,1,0,   -100,   -100,   -100,   1);
                              transform: matrix3d(1,0,0,0,   0,1,0,0,   0,0,1,0,   -100,   -100,   -100,   1);}
        .classCube28 {-webkit-transform: matrix3d(1,0,0,0,   0,1,0,0,   0,0,1,0,   0,      -100,   -100,   1);
                              transform: matrix3d(1,0,0,0,   0,1,0,0,   0,0,1,0,   0,      -100,   -100,   1);}
        .classCube29 {-webkit-transform: matrix3d(1,0,0,0,   0,1,0,0,   0,0,1,0,   +100,   -100,   -100,   1);
                              transform: matrix3d(1,0,0,0,   0,1,0,0,   0,0,1,0,   +100,   -100,   -100,   1);}
        /* temp div for rotation purpose */
        .tempClass {-webkit-transform: matrix3d(1,0,0,0,   0,1,0,0,   0,0,1,0,  0,0,0,1);
                    -webkit-transition: -webkit-transform 350ms linear; 
                    transform: matrix3d(1,0,0,0,   0,1,0,0,   0,0,1,0,  0,0,0,1);
                    transition: transform 350ms linear;  
                    will-change: transform; }
        .fooClass {-webkit-transform: matrix3d(1,0,0,0,   0,1,0,0,   0,0,1,0,  0,0,0,1);
                    -webkit-transition: none;
                    transform: matrix3d(1,0,0,0,   0,1,0,0,   0,0,1,0,  0,0,0,1);
                    transition: none;  }
        /* shaking cube animation */
        .shakeAnimation { position:relative; z-index:1; bottom:0;  -webkit-overflow-scrolling: auto !important; 
                          animation:shakeAnimation 3s 2 linear; -webkit-animation:shakeAnimation 3s 2 linear; }            
        @keyframes shakeAnimation {
            0%   { transform:rotate3d(1,1,0,-30deg) rotate3d(1,0,0,90deg) rotate3d(0,0,1,0deg) ;}
            25%  { transform:rotate3d(1,1,0,-30deg) rotate3d(1,0,0,90deg) rotate3d(0,0,1,90deg) ; }
            50%  { transform:rotate3d(1,1,0,-30deg) rotate3d(1,0,0,90deg) rotate3d(0,0,1,180deg) ;}
            75%  { transform:rotate3d(1,1,0,-30deg) rotate3d(1,0,0,90deg) rotate3d(0,0,1,270deg) ; }
            100% { transform:rotate3d(1,1,0,-30deg) rotate3d(1,0,0,90deg) rotate3d(0,0,1,360deg)  ;}
            } 
            /*這裡的translateZ的方向與flyInText的tranalateZ不同，原因是前面已經有rotate3d(1,0,0,90deg)，以X-軸(螢幕左右方向)為軸心，
              順時針旋轉90度，因此，原本垂直螢幕方向的z軸，被轉到銀幕平面的上下方向、而Y軸變成垂直螢幕方向(往內為正)了*/
        @-webkit-keyframes shakeAnimation {
            0%   { transform:rotate3d(1,1,0,-30deg) rotate3d(1,0,0,90deg) rotate3d(0,0,1,0deg) ;}
            25%  { transform:rotate3d(1,1,0,-30deg) rotate3d(1,0,0,90deg) rotate3d(0,0,1,90deg)  ; }
            50%  { transform:rotate3d(1,1,0,-30deg) rotate3d(1,0,0,90deg) rotate3d(0,0,1,180deg) ;}
            75%  { transform:rotate3d(1,1,0,-30deg) rotate3d(1,0,0,90deg) rotate3d(0,0,1,270deg) ; }
            100% { transform:rotate3d(1,1,0,-30deg) rotate3d(1,0,0,90deg) rotate3d(0,0,1,360deg)  ;}
            }
        /* flying-in animation (@anime.js) */
        .flyInText {
            height:90%;width:90%;
            position:absolute; text-align:center;
            top:0; left:0; right:0; bottom:0;
            margin:auto;
            height:2em;
            font-weight:bolder; font-size:10vw;
            color:red; text-shadow:0 0 10px white, 0 0 30px yellow;
            z-index:5;
            /*iOs系統無法單用z-index控制圖層前後，需用translateZ；windows系統則用z-index即可
            translateZ(2000px)表示把圖層從螢幕表面(Z=0)往眼睛方向拉高2000px，因為魔方為300px正方體(z=-150 ~ +150)，加上旋轉，
            z軸最大值會到150 * 1.414 px，設定2000px可以絕對高於魔方的z軸高度，避免fly Text被魔方擋住*/
            -webkit-transform: translateZ(2000px); /*iOS browser使用webkit engine*/
            transform: translateZ(2000px); /*; windows不須要加註-webkit前綴碼*/
            -webkit-transform-style:preserve-3d; transform-style:preserve-3d; 
        }
        .flyInText .flyInTextXX {
            height:2em;
            position: absolute; text-align:center;
            top:0; left:0; right:0; bottom:0;
            margin: auto;
            opacity:0;
            z-index:5;
            -webkit-transform: translateZ(2000px); transform: translateZ(2000px);
            -webkit-transform-style:preserve-3d; transform-style:preserve-3d;
        }
        .flyText1, .flyText2, .flyText3, .flyText4, .flyText5, .flyText6 {
            z-index:5;
            -webkit-transform: translateZ(2000px); transform: translateZ(2000px);
            -webkit-transform-style:preserve-3d; transform-style:preserve-3d;
        }
        /*bubble animation*/
        section{position: relative; width:50%; height: 1vh;}
        section span {
            position: absolute; z-index:4;
            background: transparent;
            border-radius: 50%;
            box-shadow: inset 0 0 10px rgb(255, 255, 255, 0.5);
            bottom: -20px;
            animation: animateBubbling 2s linear infinite;
            pointer-events: none;
        }
        section span:before{
            content: '';
            position: absolute; z-index:4;
            width: 100%; height: 100%;
            transform: scale(0.25) translate(-70%,-70%);
            background: radial-gradient(white,transparent);
            border-radius: 50%;            
        }
        @keyframes animateBubbling{
            0%   { opacity:1; transform:translateY(0%); }
            99%  { opacity:1; }
            100% { opacity:0; transform:translateY(-1200%); }
        }
    </style>
</head>

<body style="background-color:yellow;">    <!--<body style="background-color:#444444;">    -->
    <table id="mainTable" border="1" class="tbl">
        <thead></thead>
        <tbody>
            <tr height=15% class="tbltr12">
                <td colspan=3 rowspan=2 width=60% style="font-size:2.1vw; text-align:center;">
                    Rubik's Cube Everywhere! 
                <span style="color:white;"> --- WCA Rules</span>
                </td>
                <td width="12%">程式名稱</td>   
                <td width="12%">作者</td>   
                <td width="12%">日期</td>            
            </tr>
            <tr height=5% class="tbltr12" style="font-size:1.2vw;font-weight:normal;line-height:1.35vw;">
                <td>t9-10b.html</td>   <td>桃園高中<br/>白昕宸</td><td>2023/8/1</td>            
            </tr>
            <tr height=2% style="border:2px white solid;line-height:2em;text-align:center;">            
                <td Class="tbltr3">Game Console:</td>
                <td id="ETM" Class="tbltr3" style="color:white;">ETM = 0 次</td>
                <td id="OBTM" Class="tbltr3" style="color:white;">OBTM = 0 次</td>
                <td colspan=3 Class="tbltr3">Game Controls:</td>               
            </tr>            
            <tr>
                <td colspan=3 rowspan=15 id="gameConsole">
                    <button  class="roundEdge" style="margin:5px;" onclick="location.href='howToPlay.html'">
                        How To Play
                    </button>
                    <div style="color:yellow; font-size:1.8vw; float:right; font-weight:bold;" id="gameElapsed"></div>
                    <div style="color:yellow; font-size:1.8vw; float:right; font-weight:bold;" id="CapsLockIsOn"></div>
                    
                    <!-- ===== Rubik's cube area : START ===== -->
                    <div id="cube" class="cubeClass" style="margin:25% auto 25% auto;">
                        <!-- Layer-1 -->
                        <div id="Cube01" class="classCube01">
                            <!--<div id="01F" class="ucShape fsFront"></div>-->    <div class="ucSticker fsFront red"></div>                                                        
                            <!--<div id="01B" class="ucShape fsBack"></div>-->     <div class="ucSticker fsBack orange"></div>
                            <!--<div id="01L" class="ucShape fsLeft"></div>-->    <div class="ucSticker fsLeft green"></div>
                            <!--<div id="01R" class="ucShape fsRight"></div>-->    <div class="ucSticker fsRight blue"></div>
                            <!--<div id="01U" class="ucShape fsUp"></div>-->       <div class="ucSticker fsUp white"></div>   
                            <!--<div id="01D" class="ucShape fsDown"></div>-->     <div class="ucSticker fsDown yellow"></div>
                            <!--
                            <div id="01F" class="ucShape fsFront"></div>    <div class="ucSticker fsFront red"></div>                                                        
                            <div id="01B" class="ucShape fsBack"></div>     <div class="ucSticker fsBack black"></div>
                            <div id="01L" class="ucShape fsLeft"></div>     <div class="ucSticker fsLeft green"></div>
                            <div id="01R" class="ucShape fsRight"></div>    <div class="ucSticker fsRight black"></div>
                            <div id="01U" class="ucShape fsUp"></div>       <div class="ucSticker fsUp white"></div>   
                            <div id="01D" class="ucShape fsDown"></div>     <div class="ucSticker fsDown black"></div>
                            -->
                        </div>
                       
                        <div id="Cube02" class="classCube02">
                            <div id="02F" class="ucShape fsFront"></div>    <div class="ucSticker fsFront red"></div>                        
                            <div id="02B" class=" ucShape fsBack"></div>    <div class="ucSticker fsBack black"></div>
                            <div id="02L" class=" ucShape fsLeft"></div>    <div class="ucSticker fsLeft black"></div>
                            <div id="02R" class=" ucShape fsRight"></div>   <div class="ucSticker fsRight black"></div>
                            <div id="02U" class=" ucShape fsUp"></div>      <div class="ucSticker fsUp white"></div>
                            <div id="02D" class=" ucShape fsDown"></div>    <div class="ucSticker fsDown black"></div>
                        </div>
                        <!--
                        <div id="Cube03" class="classCube03">
                            <div id="03F" class=" ucShape fsFront"></div>   <div class="ucSticker fsFront red"></div>
                            <div id="03B" class=" ucShape fsBack"></div>    <div class="ucSticker fsBack black"></div>
                            <div id="03L" class=" ucShape fsLeft"></div>    <div class="ucSticker fsLeft black"></div>
                            <div id="03R" class=" ucShape fsRight"></div>   <div class="ucSticker fsRight blue"></div>
                            <div id="03U" class=" ucShape fsUp"></div>      <div class="ucSticker fsUp white"></div>
                            <div id="03D" class=" ucShape fsDown"></div>    <div class="ucSticker fsDown black"></div>
                        </div>
                        <div id="Cube04" class="classCube04">
                            <div id="04F" class=" ucShape fsFront"></div>   <div class="ucSticker fsFront black"></div>
                            <div id="04B" class=" ucShape fsBack"></div>    <div class="ucSticker fsBack black"></div>
                            <div id="04L" class=" ucShape fsLeft"></div>    <div class="ucSticker fsLeft green"></div>
                            <div id="04R" class=" ucShape fsRight"></div>   <div class="ucSticker fsRight black"></div>
                            <div id="04U" class=" ucShape fsUp"></div>      <div class="ucSticker fsUp white"></div>
                            <div id="04D" class=" ucShape fsDown"></div>    <div class="ucSticker fsDown black"></div>
                        </div>
                        <div id="Cube05" class="classCube05">
                            <div id="05F" class=" ucShape fsFront"></div>   <div class="ucSticker fsFront black"></div>
                            <div id="05B" class=" ucShape fsBack"></div>    <div class="ucSticker fsBack black"></div>
                            <div id="05L" class=" ucShape fsLeft"></div>    <div class="ucSticker fsLeft black"></div>
                            <div id="05R" class=" ucShape fsRight"></div>   <div class="ucSticker fsRight black"></div>
                            <div id="05U" class=" ucShape fsUp"></div>      <div class="ucSticker fsUp white"></div>
                            <div id="05D" class=" ucShape fsDown"></div>    <div class="ucSticker fsDown black"></div>
                        </div>
                        <div id="Cube06" class="classCube06">
                            <div id="06F" class=" ucShape fsFront"></div>   <div class="ucSticker fsFront black"></div>
                            <div id="06B" class=" ucShape fsBack"></div>    <div class="ucSticker fsBack black"></div>
                            <div id="06L" class=" ucShape fsLeft"></div>    <div class="ucSticker fsLeft black"></div>
                            <div id="06R" class=" ucShape fsRight"></div>   <div class="ucSticker fsRight blue"></div>
                            <div id="06U" class=" ucShape fsUp"></div>      <div class="ucSticker fsUp white"></div>
                            <div id="06D" class=" ucShape fsDown"></div>    <div class="ucSticker fsDown black"></div>
                        </div>
                        <div id="Cube07" class="classCube07">
                            <div id="07F" class=" ucShape fsFront"></div>   <div class="ucSticker fsFront black"></div>
                            <div id="07B" class=" ucShape fsBack"></div>    <div class="ucSticker fsBack orange"></div>
                            <div id="07L" class=" ucShape fsLeft"></div>    <div class="ucSticker fsLeft green"></div>
                            <div id="07R" class=" ucShape fsRight"></div>   <div class="ucSticker fsRight black"></div>
                            <div id="07U" class=" ucShape fsUp"></div>      <div class="ucSticker fsUp white"></div>
                            <div id="07D" class=" ucShape fsDown"></div>    <div class="ucSticker fsDown black"></div>
                        </div>
                        <div id="Cube08" class="classCube08">
                            <div id="08F" class=" ucShape fsFront"></div>   <div class="ucSticker fsFront black"></div>
                            <div id="08B" class=" ucShape fsBack"></div>    <div class="ucSticker fsBack orange"></div>
                            <div id="08L" class=" ucShape fsLeft"></div>    <div class="ucSticker fsLeft black"></div>
                            <div id="08R" class=" ucShape fsRight"></div>   <div class="ucSticker fsRight black"></div>
                            <div id="08U" class=" ucShape fsUp"></div>      <div class="ucSticker fsUp white"></div>
                            <div id="08D" class=" ucShape fsDown"></div>    <div class="ucSticker fsDown black"></div>
                        </div>
                        <div id="Cube09" class="classCube09">
                            <div id="09F" class=" ucShape fsFront"></div>   <div class="ucSticker fsFront black"></div>
                            <div id="09B" class=" ucShape fsBack"></div>    <div class="ucSticker fsBack orange"></div>
                            <div id="09L" class=" ucShape fsLeft"></div>    <div class="ucSticker fsLeft black"></div>
                            <div id="09R" class=" ucShape fsRight"></div>   <div class="ucSticker fsRight blue"></div>
                            <div id="09U" class=" ucShape fsUp"></div>      <div class="ucSticker fsUp white"></div>
                            <div id="09D" class=" ucShape fsDown"></div>    <div class="ucSticker fsDown black"></div>
                        </div>
                        -->
                        <!-- Layer-2 -->
                        <!--
                        <div id="Cube11" class="classCube11">
                            <div id="11F" class=" ucShape fsFront"></div>   <div class="ucSticker fsFront red"></div>
                            <div id="11B" class=" ucShape fsBack"></div>    <div class="ucSticker fsBack black"></div>
                            <div id="11L" class=" ucShape fsLeft"></div>    <div class="ucSticker fsLeft green"></div>
                            <div id="11R" class=" ucShape fsRight"></div>   <div class="ucSticker fsRight black"></div>
                            <div id="11U" class=" ucShape fsUp"></div>      <div class="ucSticker fsUp black"></div>
                            <div id="11D" class=" ucShape fsDown"></div>    <div class="ucSticker fsDown black"></div>
                        </div>
                        <div id="Cube12" class="classCube12">
                            <div id="12F" class=" ucShape fsFront"></div>    <div class="ucSticker fsFront red"></div>
                            <div id="12B" class=" ucShape fsBack"></div>   <div class="ucSticker fsBack black"></div>
                            <div id="12L" class=" ucShape fsLeft"></div>   <div class="ucSticker fsLeft black"></div>
                            <div id="12R" class=" ucShape fsRight"></div>  <div class="ucSticker fsRight black"></div>
                            <div id="12U" class=" ucShape fsUp"></div>     <div class="ucSticker fsUp black"></div>
                            <div id="12D" class=" ucShape fsDown"></div>   <div class="ucSticker fsDown black"></div>
                        </div>
                        <div id="Cube13" class="classCube13">
                            <div id="13F" class=" ucShape fsFront"></div>    <div class="ucSticker fsFront red"></div>
                            <div id="13B" class=" ucShape fsBack"></div>   <div class="ucSticker fsBack black"></div>
                            <div id="13L" class=" ucShape fsLeft"></div>   <div class="ucSticker fsLeft black"></div>
                            <div id="13R" class=" ucShape fsRight"></div>   <div class="ucSticker fsRight blue"></div>
                            <div id="13U" class=" ucShape fsUp"></div>     <div class="ucSticker fsUp black"></div>
                            <div id="13D" class=" ucShape fsDown"></div>   <div class="ucSticker fsDown black"></div>
                        </div>
                        <div id="Cube14" class="classCube14">
                            <div id="14F" class=" ucShape fsFront"></div>   <div class="ucSticker fsFront black"></div>
                            <div id="14B" class=" ucShape fsBack"></div>    <div class="ucSticker fsBack black"></div>
                            <div id="14L" class=" ucShape fsLeft"></div>    <div class="ucSticker fsLeft green"></div>
                            <div id="14R" class=" ucShape fsRight"></div>   <div class="ucSticker fsRight black"></div>
                            <div id="14U" class=" ucShape fsUp"></div>      <div class="ucSticker fsUp black"></div>
                            <div id="14D" class=" ucShape fsDown"></div>    <div class="ucSticker fsDown black"></div>
                        </div>
                        <div id="Cube15" class="classCube15">
                            <div id="15F" class=" ucShape fsFront"></div>   <div class="ucSticker fsFront black"></div>
                            <div id="15B" class=" ucShape fsBack"></div>    <div class="ucSticker fsBack black"></div>
                            <div id="15L" class=" ucShape fsLeft"></div>    <div class="ucSticker fsLeft black"></div>
                            <div id="15R" class=" ucShape fsRight"></div>   <div class="ucSticker fsRight black"></div>
                            <div id="15U" class=" ucShape fsUp"></div>      <div class="ucSticker fsUp black"></div>
                            <div id="15D" class=" ucShape fsDown"></div>    <div class="ucSticker fsDown black"></div>
                        </div>
                        <div id="Cube16" class="classCube16">
                            <div id="16F" class=" ucShape fsFront"></div>   <div class="ucSticker fsFront black"></div>
                            <div id="16B" class=" ucShape fsBack"></div>    <div class="ucSticker fsBack black"></div>
                            <div id="16L" class=" ucShape fsLeft"></div>    <div class="ucSticker fsLeft black"></div>
                            <div id="16R" class=" ucShape fsRight"></div>   <div class="ucSticker fsRight blue"></div>
                            <div id="16U" class=" ucShape fsUp"></div>      <div class="ucSticker fsUp black"></div>
                            <div id="16D" class=" ucShape fsDown"></div>    <div class="ucSticker fsDown black"></div>
                        </div>
                        <div id="Cube17" class="classCube17">
                            <div id="17F" class=" ucShape fsFront"></div>   <div class="ucSticker fsFront black"></div>
                            <div id="17B" class=" ucShape fsBack"></div>    <div class="ucSticker fsBack orange"></div>
                            <div id="17L" class=" ucShape fsLeft"></div>    <div class="ucSticker fsLeft green"></div>
                            <div id="17R" class=" ucShape fsRight"></div>   <div class="ucSticker fsRight black"></div>
                            <div id="17U" class=" ucShape fsUp"></div>      <div class="ucSticker fsUp black"></div>
                            <div id="17D" class=" ucShape fsDown"></div>    <div class="ucSticker fsDown black"></div>
                        </div>
                        <div id="Cube18" class="classCube18">
                            <div id="18F" class=" ucShape fsFront"></div>  <div class="ucSticker fsFront black"></div>
                            <div id="18B" class=" ucShape fsBack"></div>  <div class="ucSticker fsBack orange"></div>
                            <div id="18L" class=" ucShape fsLeft"></div>  <div class="ucSticker fsLeft black"></div>
                            <div id="18R" class=" ucShape fsRight"></div>  <div class="ucSticker fsRight black"></div>
                            <div id="18U" class=" ucShape fsUp"></div>  <div class="ucSticker fsUp black"></div>
                            <div id="18D" class=" ucShape fsDown"></div>  <div class="ucSticker fsDown black"></div>
                        </div>
                        <div id="Cube19" class="classCube19">
                            <div id="19F" class=" ucShape fsFront"></div>   <div class="ucSticker fsFront black"></div>
                            <div id="19B" class=" ucShape fsBack"></div>    <div class="ucSticker fsBack orange"></div>
                            <div id="19L" class=" ucShape fsLeft"></div>    <div class="ucSticker fsLeft black"></div>
                            <div id="19R" class=" ucShape fsRight"></div>   <div class="ucSticker fsRight blue"></div>
                            <div id="19U" class=" ucShape fsUp"></div>      <div class="ucSticker fsUp black"></div>
                            <div id="19D" class=" ucShape fsDown"></div>    <div class="ucSticker fsDown black"></div>
                        </div>
                        -->
                        <!-- Layer-3 -->
                        <!--
                        <div id="Cube21" class="classCube21">
                            <div id="21F" class=" ucShape fsFront"></div>   <div class="ucSticker fsFront red"></div>
                            <div id="21B" class=" ucShape fsBack"></div>    <div class="ucSticker fsBack black"></div>
                            <div id="21L" class=" ucShape fsLeft"></div>    <div class="ucSticker fsLeft green"></div>
                            <div id="21R" class=" ucShape fsRight"></div>   <div class="ucSticker fsRight black"></div>
                            <div id="21U" class=" ucShape fsUp"></div>      <div class="ucSticker fsUp black"></div>
                            <div id="21D" class=" ucShape fsDown"></div>    <div class="ucSticker fsDown yellow"></div>
                        </div>
                        <div id="Cube22" class="classCube22">
                            <div id="22F" class=" ucShape fsFront"></div>   <div class="ucSticker fsFront red"></div>
                            <div id="22B" class=" ucShape fsBack"></div>    <div class="ucSticker fsBack black"></div>
                            <div id="22L" class=" ucShape fsLeft"></div>    <div class="ucSticker fsLeft black"></div>
                            <div id="22R" class=" ucShape fsRight"></div>   <div class="ucSticker fsRight black"></div>
                            <div id="22U" class=" ucShape fsUp"></div>      <div class="ucSticker fsUp black"></div>
                            <div id="22D" class=" ucShape fsDown"></div>    <div class="ucSticker fsDown yellow"></div>
                        </div>
                        <div id="Cube23" class="classCube23">
                            <div id="23F" class=" ucShape fsFront"></div>   <div class="ucSticker fsFront red"></div>
                            <div id="23B" class=" ucShape fsBack"></div>    <div class="ucSticker fsBack black"></div>
                            <div id="23L" class=" ucShape fsLeft"></div>    <div class="ucSticker fsLeft black"></div>
                            <div id="23R" class=" ucShape fsRight"></div>   <div class="ucSticker fsRight blue"></div>
                            <div id="23U" class=" ucShape fsUp"></div>      <div class="ucSticker fsUp black"></div>
                            <div id="23D" class=" ucShape fsDown"></div>    <div class="ucSticker fsDown yellow"></div>
                        </div>
                        <div id="Cube24" class="classCube24">
                            <div id="24F" class=" ucShape fsFront"></div>   <div class="ucSticker fsFront black"></div>
                            <div id="24B" class=" ucShape fsBack"></div>    <div class="ucSticker fsBack black"></div>
                            <div id="24L" class=" ucShape fsLeft"></div>    <div class="ucSticker fsLeft green"></div>
                            <div id="24R" class=" ucShape fsRight"></div>   <div class="ucSticker fsRight black"></div>
                            <div id="24U" class=" ucShape fsUp"></div>      <div class="ucSticker fsUp black"></div>
                            <div id="24D" class=" ucShape fsDown"></div>    <div class="ucSticker fsDown yellow"></div>
                        </div>
                        <div id="Cube25" class="classCube25">
                            <div id="25F" class=" ucShape fsFront"></div>   <div class="ucSticker fsFront black"></div>
                            <div id="25B" class=" ucShape fsBack"></div>    <div class="ucSticker fsBack black"></div>
                            <div id="25L" class=" ucShape fsLeft"></div>    <div class="ucSticker fsLeft black"></div>
                            <div id="25R" class=" ucShape fsRight"></div>   <div class="ucSticker fsRight black"></div>
                            <div id="25U" class=" ucShape fsUp"></div>      <div class="ucSticker fsUp black"></div>
                            <div id="25D" class=" ucShape fsDown"></div>    <div class="ucSticker fsDown yellow"></div>
                        </div>
                        <div id="Cube26" class="classCube26">
                            <div id="26F" class=" ucShape fsFront"></div>   <div class="ucSticker fsFront black"></div>
                            <div id="26B" class=" ucShape fsBack"></div>    <div class="ucSticker fsBack black"></div>
                            <div id="26L" class=" ucShape fsLeft"></div>    <div class="ucSticker fsLeft black"></div>
                            <div id="26R" class=" ucShape fsRight"></div>   <div class="ucSticker fsRight blue"></div>
                            <div id="26U" class=" ucShape fsUp"></div>      <div class="ucSticker fsUp black"></div>
                            <div id="26D" class=" ucShape fsDown"></div>    <div class="ucSticker fsDown yellow"></div>
                        </div>
                        <div id="Cube27" class="classCube27">
                            <div id="27F" class=" ucShape fsFront"></div>   <div class="ucSticker fsFront black"></div>
                            <div id="27B" class=" ucShape fsBack"></div>    <div class="ucSticker fsBack orange"></div>
                            <div id="27L" class=" ucShape fsLeft"></div>    <div class="ucSticker fsLeft green"></div>
                            <div id="27R" class=" ucShape fsRight"></div>   <div class="ucSticker fsRight black"></div>
                            <div id="27U" class=" ucShape fsUp"></div>      <div class="ucSticker fsUp black"></div>
                            <div id="27D" class=" ucShape fsDown"></div>    <div class="ucSticker fsDown yellow"></div>
                        </div>
                        <div id="Cube28" class="classCube28">
                            <div id="28F" class=" ucShape fsFront"></div>   <div class="ucSticker fsFront black"></div>
                            <div id="28B" class=" ucShape fsBack"></div>    <div class="ucSticker fsBack orange"></div>
                            <div id="28L" class=" ucShape fsLeft"></div>    <div class="ucSticker fsLeft black"></div>
                            <div id="28R" class=" ucShape fsRight"></div>   <div class="ucSticker fsRight black"></div>
                            <div id="28U" class=" ucShape fsUp"></div>      <div class="ucSticker fsUp black"></div>
                            <div id="28D" class=" ucShape fsDown"></div>    <div class="ucSticker fsDown yellow"></div>
                        </div>
                        <div id="Cube29" class="classCube29">
                            <div id="29F" class=" ucShape fsFront"></div>   <div class="ucSticker fsFront black"></div>
                            <div id="29B" class=" ucShape fsBack"></div>    <div class="ucSticker fsBack orange"></div>
                            <div id="29L" class=" ucShape fsLeft"></div>    <div class="ucSticker fsLeft black"></div>
                            <div id="29R" class=" ucShape fsRight"></div>   <div class="ucSticker fsRight blue"></div>
                            <div id="29U" class=" ucShape fsUp"></div>      <div class="ucSticker fsUp black"></div>
                            <div id="29D" class=" ucShape fsDown"></div>    <div class="ucSticker fsDown yellow"></div>
                        </div>
                        -->
                    </div>
                    <!-- ===== Rubik's cube area : END ===== -->
                    <section></section>
                    <div id="solvingStepsId" height=2em style="font-size:0.75vw;color:white; overflow:auto;">                        
                        ※
                    </div>
                </td>
                <td colspan=3 rowspan=15>
                    <!-- ===== Game control area: start ===== -->
                    <table id="gameControl" style="height:40%; width:100%; border-collapse:collapse; table-layout:fixed;">
                    <tbody>
                        <tr>
                            <td class="subTitle">啟動模式</td>
                            <td colspan=2 class="subTitle rightText">轉動速度
                                <input style="width:4em; text-align:right; background-color: #EEEEEE;" 
                                       id="rotSpeed" name="rotSpeedNo" type=number value=300 min=10 max=5000 /><span> ms</span>
                            </td>                            
                        </tr>
                        <tr>
                            <td class="subTitle centerText" >
                                <button class="roundEdge" onclick=regularStart()>規則模式</button>
                            </td>
                            <td colspan=2 class="subTitle centerText">
                                <button class="roundEdge" onclick=scrambleStart()>轉亂模式</button>
                                    <input style="width:4em; text-align:right;background-color: #EEEEEE;"
                                           id="scrambleTurns" name="scrambledNo" type=number value=32 min=0 max=100 />
                                    <span> 次</span>
                            </td>
                        </tr>
                        <!-- ------------------------------------------------------------ -->
                        <tr>
                            <td colspan=3 class="subTitle borderTop">整顆方塊轉動 Rotations</td>
                        </tr>
                        <tr>
                            <td class="btHd">轉180度</td> <td class="btHd">逆時針90度</td> <td class="btHd">順時針90度</td>
                        </tr>
                        <tr>
                            <td class="btHd"><button class="plainCtrl" onclick=push2Rotate(12,-100,3,X180)>X2</button></td>
                            <td class="btHd"><button class="plainCtrl G-CCW" onclick=push2Rotate(12,-100,3,X90)>X'(R')</button></td>
                            <td class="btHd"><button class="plainCtrl B-CW" onclick=push2Rotate(12,100,3,Xn90)>X (R)</button></td>
                        </tr>
                        <tr>
                             <td class="btHd"><button class="plainCtrl" onclick=push2Rotate(14,-100,3,Z180)>Y2</button></td>
                             <td class="btHd"><button class="plainCtrl Y-CCW" onclick=push2Rotate(14,-100,3,Z90)>Y'(U')</button></td>
                             <td class="btHd"><button class="plainCtrl W-CW " onclick=push2Rotate(14,100,3,Zn90)>Y(U)</button></td>
                        </tr>
                        <tr>
                             <td class="btHd"><button class="plainCtrl" onclick=push2Rotate(13,-100,3,Y180)>Z2</button></td>
                             <td class="btHd"><button class="plainCtrl O-CCW" onclick=push2Rotate(13,-100,3,Y90)>Z'(F')</button></td>
                             <td class="btHd"><button class="plainCtrl R-CW" onclick=push2Rotate(13,100,3,Yn90)>Z(F)</button></td>
                        </tr>
                    </tbody>
                    </table>                       
                    <!-- --------------------------------------------------------------------------------- -->                        
                    <table id="faceMoveControl" style="height:60%; width:100%;border-collapse: collapse;table-layout:fixed;">
                    <tbody>
                        <tr>
                            <td colspan=3 class="subTitle borderTop">
                                <b>[Click]</b>最外層轉動 Face moves / <b>[Swipe]</b>多層轉動 Outer block moves
                            </td>  
                        </tr>
                        <tr>
                            <td class="btHd">轉180度</td><td class="btHd">逆時針90度</td><td class="btHd">順時針90度</td>
                        </tr>
                        <tr>
                            <td class="btHd">
                                <button id="U2" onclick=push2Rotate(14,100,1,Z180) class="plainCtrl">U2</button>
                                <button id="U22" onclick=push2Rotate(14,100,2,Z180) class="beHidden">U2</button>
                            </td>
                            <td class="btHd">
                                <button id="UCCW" onclick=push2Rotate(14,100,1,Z90) class="plainCtrl W-CCW">U'</button>
                                <button id="UCCW2" onclick=push2Rotate(14,100,2,Z90) class="beHidden">U'</button>
                            </td>
                            <td class="btHd">
                                <button id="UCW" onclick=push2Rotate(14,100,1,Zn90) class="plainCtrl W-CW">U</button>
                                <button id="UCW2" onclick=push2Rotate(14,100,2,Zn90) class="beHidden">U</button>
                            </td>
                        </tr>
                        <tr>
                            <td class="btHd">
                                <button id="F2" onclick=push2Rotate(13,100,1,Y180) class="plainCtrl">F2</button>
                                <button id="F22" onclick=push2Rotate(13,100,2,Y180) class="beHidden">F2</button>
                            </td>
                            <td class="btHd">
                                <button id="FCCW" onclick=push2Rotate(13,100,1,Y90) class="plainCtrl R-CCW">F'</button>
                                <button id="FCCW2" onclick=push2Rotate(13,100,2,Y90) class="beHidden">F'</button>
                            </td>
                            <td class="btHd">
                                <button id="FCW" onclick=push2Rotate(13,100,1,Yn90) class="plainCtrl R-CW">F</button>
                                <button id="FCW2" onclick=push2Rotate(13,100,2,Yn90) class="beHidden">F</button>
                            </td>
                        </tr>
                        <tr>
                            <td class="btHd">
                                <button id="R2" onclick=push2Rotate(12,100,1,X180) class="plainCtrl">R2</button>
                                <button id="R22" onclick=push2Rotate(12,100,2,X180) class="beHidden">R2</button>
                            </td>
                            <td class="btHd">
                                <button id="RCCW" onclick=push2Rotate(12,100,1,X90) class="plainCtrl B-CCW">R'</button>
                                <button id="RCCW2" onclick=push2Rotate(12,100,2,X90) class="beHidden">R'</button>
                            </td>
                            <td class="btHd">
                                <button id="RCW" onclick=push2Rotate(12,100,1,Xn90) class="plainCtrl B-CW">R</button>
                                <button id="RCW2" onclick=push2Rotate(12,100,2,Xn90) class="beHidden">R</button>
                            </td>
                        </tr>
                        <tr>
                            <td class="btHd">
                                <button id="D2" onclick=push2Rotate(14,-100,1,Z180) class="plainCtrl">D2</button>
                                <button id="D22" onclick=push2Rotate(14,-100,2,Z180) class="beHidden">D2</button>
                            </td>
                            <td class="btHd">
                                <button id="DCCW" onclick=push2Rotate(14,-100,1,Zn90) class="plainCtrl Y-CCW">D'</button>
                                <button id="DCCW2" onclick=push2Rotate(14,-100,2,Zn90) class="beHidden">D'</button>
                            </td>
                            <td class="btHd">
                                <button id="DCW" onclick=push2Rotate(14,-100,1,Z90) class="plainCtrl Y-CW">D</button>
                                <button id="DCW2" onclick=push2Rotate(14,-100,2,Z90) class="beHidden">D</button>
                            </td>
                        </tr>
                        <tr>
                            <td class="btHd">
                                <button id="B2" onclick=push2Rotate(13,-100,1,Y180) class="plainCtrl">B2</button>
                                <button id="B22" onclick=push2Rotate(13,-100,2,Y180) class="beHidden">B2</button>
                            </td>
                            <td class="btHd">
                                <button id="BCCW" onclick=push2Rotate(13,-100,1,Yn90) class="plainCtrl O-CCW">B'</button>
                                <button id="BCCW2" onclick=push2Rotate(13,-100,2,Yn90) class="beHidden">B'</button>
                            </td>
                            <td class="btHd">
                                <button id="BCW" onclick=push2Rotate(13,-100,1,Y90) class="plainCtrl O-CW">B</button>
                                <button id="BCW2" onclick=push2Rotate(13,-100,2,Y90) class="beHidden">B</button>
                            </td>
                        </tr>
                        <tr>
                             <td class="btHd">
                                <button id="L2" onclick=push2Rotate(12,-100,1,X180) class="plainCtrl">L2</button>
                                <button id="L22" onclick=push2Rotate(12,-100,2,X180) class="beHidden">L2</button>
                            </td>
                             <td class="btHd">
                                <button id="LCCW" onclick=push2Rotate(12,-100,1,Xn90) class="plainCtrl G-CCW">L'</button>
                                <button id="LCCW2" onclick=push2Rotate(12,-100,2,Xn90) class="beHidden">L'</button>
                            </td>
                             <td class="btHd">
                                <button id="LCW" onclick=push2Rotate(12,-100,1,X90) class="plainCtrl G-CW">L</button>
                                <button id="LCW2" onclick=push2Rotate(12,-100,2,X90) class="beHidden">L</button>
                            </td>
                        </tr>                    
                    <!-- ---------------------------------------------------- -->
                    </tbody>
                    </table>
                    <!-- ===== Game control area: end ===== -->
                </td>
            </tr>
        </tbody>
    </table>
<!-- ************************** javascript & jQuery ********************************** -->
<script>
    // define quaterion parameter of matrix3d transform
    X90=[1,0,0,0,   0,0,-1,0,   0,1,0,0,    0,0,0,1];   Xn90=[1,0,0,0,   0,0,1,0,    0,-1,0,0,   0,0,0,1];
    Y90=[0,0,1,0,   0,1,0,0,    -1,0,0,0,   0,0,0,1];   Yn90=[0,0,-1,0, 0,1,0,0,    1,0,0,0,    0,0,0,1];
    Z90=[0,-1,0,0,  1,0,0,0,    0,0,1,0,    0,0,0,1];   Zn90=[0,1,0,0,   -1,0,0,0,   0,0,1,0,    0,0,0,1];

    X180=[1,0,0,0,   0,-1,0,0,   0,0,-1,0,  0,0,0,1];  UnitM = [1,0,0,0,   0,1,0,0,    0,0,1,0,    0,0,0,1];
    Y180=[-1,0,0,0,  0,1,0,0,    0,0,-1,0,  0,0,0,1];
    Z180=[-1,0,0,0,  0,-1,0,0,   0,0,1,0,   0,0,0,1];

    // get major DOM Elements
    var body = $('body');
    var cube = $('#cube');
    var solvingStepsList = "MoveSteps:<br/>";

    // All Cubic-Pieces List
    cubeList = ['#Cube01','#Cube02','#Cube03',  '#Cube04','#Cube05','#Cube06',  '#Cube07','#Cube08','#Cube09',
                '#Cube11','#Cube12','#Cube13',  '#Cube14','#Cube15','#Cube16',  '#Cube17','#Cube18','#Cube19',
                '#Cube21','#Cube22','#Cube23',  '#Cube24','#Cube25','#Cube26',  '#Cube27','#Cube28','#Cube29'];

    cubeListFace = [['#01U','#02U','#03U', '#04U','#05U','#06U',  '#07U','#08U','#09U'],
                    ['#01F','#02F','#03F', '#11F','#12F','#13F',  '#21F','#22F','#23F'],
                    ['#07B','#08B','#09B', '#17B','#18B','#19B',  '#27B','#28B','#29B'],
                    ['#21D','#22D','#23D', '#24D','#25D','#26D',  '#27D','#28D','#29D'],
                    ['#01L','#04L','#07L', '#11L','#14L','#17L',  '#21L','#24L','#27L'],
                    ['#03R','#06R','#09R', '#13R','#16R','#19R',  '#23R','#26R','#29R']];

//==========================  Rotation Moves =============================================================
    //  push cube pieces to a temp div (cube face), rotate it, then push back after rotation
    OBTM = 0;
    ETM =0;
    function push2Rotate(XYZ,pos,rotLayers,rot){
        if (lockState != "Locked") {
            lockState = "Locked";
            solvingSteps(XYZ,pos,rotLayers,rot);
            if (rotLayers !=3 ) { OBTM++ };
            $('#OBTM').text(" OBTM = " + OBTM + " 次" );
            ETM++
            $('#ETM').text(" ETM = " + ETM + " 次" );
            // push cube to tempDiv
            $("#cube").append($("<div></div>").attr('id','tempId').addClass("tempClass"));
            var tempDiv =$("#tempId");
            $.each(cubeList, function(index, item) {
                var tempArr = $(item).css('-transform').split(',');
                // 1-layers move
                if ( parseInt(tempArr[XYZ],10)=== pos )   { $(item).appendTo(tempDiv); };
                // 2-layers move
                if ( Math.abs(parseInt(tempArr[XYZ],10))=== rotLayers-2 )   { $(item).appendTo(tempDiv); };
                // 3-layers move
                if ( rotLayers === 3 )   { $(item).appendTo(tempDiv); };
            });
            
            // transition speed setting
            var transitionSpeedSetting = "transform " + $("#rotSpeed").val() + "ms linear" ;
            tempDiv.css("transition", transitionSpeedSetting);

            // update cube css to rotate, then back to original div (listen to transitioned event)        
            tempDiv.css("transform",tempDiv.css("transform") + "matrix3d(" +rot+ ")");
            tempDiv.on( 'transitionend webkitTransitionEnd',function() {
                var tempDivChild = tempDiv.children("div");
                $.each(tempDivChild, function(index, item) {             
                    $(item).css('transform', tempDiv.css('transform') + $(item).css('transform'));
                    $(item).appendTo(cube);
                });
                tempDiv.remove();
                lockState = "unLocked";
                
                doneCheck();
            });
        }        
    };
    function solvingSteps(XYZ,pos,rotLayers,rot) {
        if (rotLayers !=3) {            
            var CodesMoveStep = {
                "12,-100,1,X90":"L", "12,-100,1,Xn90": "L'", "12,100,1,Xn90":"R", "12,100,1,X90":"R'",
                "14,100,1,Zn90":"U", "14,100,1,Z90":"U'", "14,-100,1,Z90":"D", "14,-100,1,Zn90":"D'",
                "13,100,1,Yn90":"F", "13,100,1,Y90":"F'", "13,-100,1,Y90":"B", "13,-100,1,Yn90":"B'",

                "12,-100,1,X180":"L2", "12,100,1,X180":"R2", "14,100,1,Z180":"U2", "14,-100,1,Z180":"D2",
                "13,100,1,Y180":"F2", "13,-100,1,Y180":"B2",

                "12,-100,2,X90":"Lw", "12,-100,2,Xn90":"Lw'", "12,100,2,Xn90":"Rw", "12,100,2,X90":"Rw'",
                "14,100,2,Zn90":"Uw", "14,100,2,Z90":"Uw'", "14,-100,2,Z90":"Dw", "14,-100,2,Zn90":"Dw'",
                "13,100,2,Yn90":"Fw", "13,100,2,Y90":"Fw'", "13,-100,2,Y90":"Bw", "13,-100,2,Yn90":"Bw'",

                "12,-100,2,X180":"Lw2", "12,100,2,X180":"Rw2", "14,100,2,Z180":"Uw2", "14,-100,2,Z180":"Dw2",
                "13,100,2,Y180":"Fw2", "13,-100,2,Y180":"Bw2",

                "1,0,0,0,0,0,-1,0,0,1,0,0,0,0,0,1":"X90",   "1,0,0,0,0,0,1,0,0,-1,0,0,0,0,0,1":"Xn90",
                "0,0,1,0,0,1,0,0,-1,0,0,0,0,0,0,1":"Y90",   "0,0,-1,0,0,1,0,0,1,0,0,0,0,0,0,1":"Yn90",
                "0,-1,0,0,1,0,0,0,0,0,1,0,0,0,0,1":"Z90",   "0,1,0,0,-1,0,0,0,0,0,1,0,0,0,0,1":"Zn90",

                "1,0,0,0,0,-1,0,0,0,0,-1,0,0,0,0,1":"X180",  "-1,0,0,0,0,1,0,0,0,0,-1,0,0,0,0,1":"Y180",
                "-1,0,0,0,0,-1,0,0,0,0,1,0,0,0,0,1":"Z180"
            };
            var thisMoveKey = XYZ + "," + pos + "," + rotLayers + "," + CodesMoveStep[rot];
            // alert(rot);
            // alert(thisMoveKey);
            var thisMoveCode = CodesMoveStep[thisMoveKey] + " ";
            solvingStepsList += thisMoveCode;
            document.getElementById("solvingStepsId").innerHTML = solvingStepsList;
        }
    }
    function doneCheck() {
        doneRC = "solved";
        for (var i = 0; i < 6; i++) {
            mSum12=0, mSum13=0, mSum14=0;
            m12=0, m13=0, m14=0;
            $.each(cubeListFace[i], function(index, item) {
                $("#cube").append($("<div></div>").attr('id','foo').addClass("fooClass"));
                $("#foo").css('-transform',$(item).parent().css('-transform') + $(item).css('-transform') );
                var tempArr = $("#foo").css('-transform').split(',');
                mSum12 += parseInt(tempArr[12],10); m12=parseInt(tempArr[12],10);
                mSum13 += parseInt(tempArr[13],10); m13=parseInt(tempArr[13],10);
                mSum14 += parseInt(tempArr[14],10); m14=parseInt(tempArr[14],10);
                $('#foo').remove();
            });
            
            if ( mSum12 != m12*9 && mSum13 != m13*9 && mSum14 != m14*9) { doneRC = "notYet"; return };
        }
        if (doneRC === "solved" && gameTimer === "timerOn" ) {            
            clearTimeout(eventGameElapsedTime);
            document.getElementById('cube').classList.add("shakeAnimation");
            gameTimer = "timerOff";
            startBubbling();
            flyInText();
            // $('.flyInText').on( 'transitionend webkitTransitionEnd',function() {
            //     alert("remove anime");
            //     anime.remove( ".flyInText .flyText1" );
            //     anime.remove( ".flyInText .flyText2" );
            //     anime.remove( ".flyInText .flyText3" );
            //     anime.remove( ".flyInText .flyText4" );
            //     anime.remove( ".flyInText .flyText5" );
            //     anime.remove( ".flyInText .flyText6" );
            //     anime.remove( ".flyInText" );
            //     $('.flyInText').remove();
            // });
        }
    }
//===============================  Start Mode  ================================================
    // Load no of turns to scramble from html input box
    function regularStart() {
        localStorage.setItem("LocalStorageturns", 0);
        location.href='rubiksGame.html';
    }
    function scrambleStart() {
        localStorage.setItem("LocalStorageturns", $("#scrambleTurns").val());
        location.href='rubiksGame.html';
    }
    window.addEventListener('load', (event) => {
        gameTimer = "timerOff";
        turns = localStorage.getItem("LocalStorageturns");        
        if (turns > 0) { scramble(turns); $("#scrambleTurns").val(turns); gameTimer = "timerOn"; }
        localStorage.removeItem('LocalStorageturns');
    });
//=============================== for Scramble ================================================
    // push - rotate - pull back, W/O TRANSITION EFFECT when run scrambling
    // Rotate Moves
    function push2RotateNoTransition(XYZ,pos,faceDiv,rot) {
        lockState = "Locked";
        // push cube to tempDiv
        $("#cube").append($("<div></div>").attr('id','tempId').addClass("tempClass"));
        $(".tempClass").css("transition","none"); //stop transition effect temporarily, removed when tempDiv removed
        var tempDiv =$("#tempId");
        $.each(cubeList, function(index, item) {
            var tempArr = $(item).css('-transform').split(',');
            if ( $.trim(tempArr[XYZ])=== pos.toString())   { $(item).appendTo(tempDiv); };
        });
        // update cube css, back to original div (w/o transitioned event)
        var faceDivTemp = tempDiv.css("-transform");
        tempDiv.css("-transform",tempDiv.css("-transform") + "matrix3d(" +rot+ ")");
        var tempDivChild = tempDiv.children("div");
        $.each(tempDivChild, function(index, item) {             
            $(item).css('-transform', tempDiv.css('-transform') + $(item).css('-transform'));
            $(item).appendTo(cube);                    
        });
        tempDiv.remove();
        lockState = "unLocked";
    };
    // way of scrambling from chosen random number repeatedly
    function scramble(turns) {        
        // $("#scrambleTurns").val(turns);
        $('#cubeMode').text("模式　=　轉亂模式");
        OBTM = 0;
        ETM = 0;
        $('#OBTM').text(" OBTM = " + OBTM + " 次" );
        $('#ETM').text(" ETM = " + ETM + " 次" );
        var keys = ["l","L","r","R","f","F","b","B","u","U","d","D",];
        i=0;
        while (i < turns ) {
            if (lockState === "unLocked") {
                var randNo = Math.floor(Math.random()*12);
                if      (keys[randNo] === "l")  { push2RotateNoTransition(12,-100,1,X90);  }
                else if (keys[randNo] === "L")  { push2RotateNoTransition(12,-100,1,Xn90); }
                else if (keys[randNo] === "r")  { push2RotateNoTransition(12,100,1,Xn90); }
                else if (keys[randNo] === "R")  { push2RotateNoTransition(12,100,1,X90);  }
                else if (keys[randNo] === "u")  { push2RotateNoTransition(14,100,1,Zn90); }
                else if (keys[randNo] === "U")  { push2RotateNoTransition(14,100,1,Z90);  }
                else if (keys[randNo] === "d")  { push2RotateNoTransition(14,-100,1,Z90);  }
                else if (keys[randNo] === "D")  { push2RotateNoTransition(14,-100,1,Zn90); }
                else if (keys[randNo] === "f")  { push2RotateNoTransition(13,100,1,Yn90); }
                else if (keys[randNo] === "F")  { push2RotateNoTransition(13,100,1,Y90);  }
                else if (keys[randNo] === "b")  { push2RotateNoTransition(13,-100,1,Y90); }
                else if (keys[randNo] === "B")  { push2RotateNoTransition(13,-100,1,Yn90);}
                i++;
            };
        }
        if (turns != 0) { 
            gameStartTime = new Date(); 
            gameElapsedTime(); 
        }
        else { 
            document.getElementById('gameElapsed').innerHTML = ""; 
        }
    };
    // game timer
    function gameElapsedTime() {
        var currentTime = new Date();
        var eTime = (currentTime.getTime() - gameStartTime.getTime())/1000 ;
        document.getElementById('gameElapsed').innerHTML = "elapsedTime = " + eTime.toFixed(3) + ' s';
        eventGameElapsedTime = setTimeout(gameElapsedTime, 1);
    }
//==============  Keyboard event ===============================================================
    //keyboard event to rotate cubes, and change view angle
    lockState = "unLocked";
    $(function(){ 
        $("body").keydown(function(e){
            if (event.getModifierState("CapsLock")) 
                 {document.getElementById("CapsLockIsOn").innerHTML = "CapsLock: ON  /　";  }
            else {document.getElementById("CapsLockIsOn").innerHTML = "";  };

            // listen to keyboard in 300ms, for 2-layer moves
            Layers = 1;
            rotDegree = 90;
            timeWait = 300;
            $("body").keydown(function(e){
                if (e.key === "w") { Layers = 2; }
                if (e.key === "2") { rotDegree = 180; }
                if (e.key === "p") { Layers = 2; rotDegree = 180; }
            });
            window.setTimeout(function() {
                if (lockState === "unLocked") {
                    if      ( e.key === "l" && rotDegree===90 ) { push2Rotate(12,-100,Layers,X90);  }
                    else if ( e.key === "L" && rotDegree===90 ) { push2Rotate(12,-100,Layers,Xn90); }
                    else if ( e.key === "r" && rotDegree===90 ) { push2Rotate(12,100,Layers,Xn90);  }
                    else if ( e.key === "R" && rotDegree===90 ) { push2Rotate(12,100,Layers,X90);   }
                    else if ( e.key === "u" && rotDegree===90 ) { push2Rotate(14,100,Layers,Zn90);  }
                    else if ( e.key === "U" && rotDegree===90 ) { push2Rotate(14,100,Layers,Z90);   }
                    else if ( e.key === "d" && rotDegree===90 ) { push2Rotate(14,-100,Layers,Z90);  }
                    else if ( e.key === "D" && rotDegree===90 ) { push2Rotate(14,-100,Layers,Zn90); }
                    else if ( e.key === "f" && rotDegree===90 ) { push2Rotate(13,100,Layers,Yn90);  }
                    else if ( e.key === "F" && rotDegree===90 ) { push2Rotate(13,100,Layers,Y90);   }
                    else if ( e.key === "b" && rotDegree===90 ) { push2Rotate(13,-100,Layers,Y90);  }
                    else if ( e.key === "B" && rotDegree===90 ) { push2Rotate(13,-100,Layers,Yn90); }
                    
                    else if ( e.key === "l" && rotDegree===180 ) { push2Rotate(12,-100,Layers,X180);}
                    else if ( e.key === "r" && rotDegree===180 ) { push2Rotate(12,100,Layers,X180); }
                    else if ( e.key === "u" && rotDegree===180 ) { push2Rotate(14,100,Layers,Z180); }
                    else if ( e.key === "d" && rotDegree===180 ) { push2Rotate(14,-100,Layers,Z180);}
                    else if ( e.key === "f" && rotDegree===180 ) { push2Rotate(13,100,Layers,Y180); }
                    else if ( e.key === "b" && rotDegree===180 ) { push2Rotate(13,-100,Layers,Y180);}

                    else if ( e.key === "x" && rotDegree===90 ) { push2Rotate(12,100,3,Xn90);  }
                    else if ( e.key === "X" && rotDegree===90 ) { push2Rotate(12,-100,3,X90);  }
                    else if ( e.key === "y" && rotDegree===90 ) { push2Rotate(14,100,3,Zn90);  }
                    else if ( e.key === "Y" && rotDegree===90 ) { push2Rotate(14,-100,3,Z90);  }
                    else if ( e.key === "z" && rotDegree===90 ) { push2Rotate(13,100,3,Yn90);  }
                    else if ( e.key === "Z" && rotDegree===90 ) { push2Rotate(13,-100,3,Y90);  }
                  
                    else if ( e.key === "x" && rotDegree===180 ) { push2Rotate(12,-100,3,X180); }                   
                    else if ( e.key === "y" && rotDegree===180 ) { push2Rotate(14,-100,3,Z180); }                  
                    else if ( e.key === "z" && rotDegree===180 ) { push2Rotate(13,-100,3,Y180); }

                };
            }, timeWait);
        }); 
    });
//==============  rotation modifier for swipe rotation on cube ===================================
    // determine roration direction as per touch start and end position 
    function getSwipeClockwiseAndMove (tempXYZPointerDown, tempXYZPointerUp) {
        var md12 = parseInt(tempXYZPointerDown[12],10); var mu12 = parseInt(tempXYZPointerUp[12],10);
        var md13 = parseInt(tempXYZPointerDown[13],10); var mu13 = parseInt(tempXYZPointerUp[13],10);
        var md14 = parseInt(tempXYZPointerDown[14],10); var mu14 = parseInt(tempXYZPointerUp[14],10);

        if ( md12 === -150 || md13 === -150 || md14 === -150 ) // back side from screen eyeview
            {rotModifier = -1; }
        else { rotModifier = 1;}

        var deltaXYZ12 =rotModifier*(mu12-md12);
        var deltaXYZ13 =rotModifier*(mu13-md13);
        var deltaXYZ14 =rotModifier*(mu14-md14);

        if (lockState === "unLocked") { 
            if ( md12 === mu12 && md12 === 100)   
                {        if ( (deltaXYZ13 > 0 && deltaXYZ14 ===0) || (deltaXYZ13 ===0 && deltaXYZ14 < 0) )
                            { push2Rotate(12,100,1,X90); }
                    else if ( (deltaXYZ13 < 0 && deltaXYZ14 ===0) || (deltaXYZ13 ===0 && deltaXYZ14 > 0) )
                            { push2Rotate(12,100,1,Xn90); }     
                }
            else if ( md12 === mu12 && md12 === 0)   
                {        if ( (deltaXYZ13 > 0 && deltaXYZ14 ===0) || (deltaXYZ13 ===0 && deltaXYZ14 < 0) )
                            { push2Rotate(12,100,3,X90); }
                    else if ( (deltaXYZ13 < 0 && deltaXYZ14 ===0) || (deltaXYZ13 ===0 && deltaXYZ14 > 0) )
                            { push2Rotate(12,100,3,Xn90); }     
                }            
            else if ( md12 === mu12 && md12 === -100 )   
                {        if ( (deltaXYZ13 < 0 && deltaXYZ14 ===0) || (deltaXYZ13 ===0 && deltaXYZ14 > 0) )
                            { push2Rotate(12,-100,1,Xn90); }
                    else if ( (deltaXYZ13 > 0 && deltaXYZ14 ===0) || (deltaXYZ13 ===0 && deltaXYZ14 < 0) ) 
                            { push2Rotate(12,-100,1,X90); }     
                }
            // ----------------------------------------------------
            else if ( md13 === mu13 && md13 === 100 )   
                {        if ( (deltaXYZ12 > 0 && deltaXYZ14 === 0) || (deltaXYZ12 ===0 && deltaXYZ14 < 0))
                            { push2Rotate(13,100,1,Yn90); }
                    else if ( (deltaXYZ12 < 0 && deltaXYZ14 === 0) || (deltaXYZ12 ===0 && deltaXYZ14 > 0)) 
                            { push2Rotate(13,100,1,Y90);  }     
                } 
            else if ( md13 === mu13 && md13 === 0 )   
                {        if ( (deltaXYZ12 > 0 && deltaXYZ14 === 0) || (deltaXYZ12 ===0 && deltaXYZ14 < 0))
                            { push2Rotate(13,100,3,Yn90); }
                    else if ( (deltaXYZ12 < 0 && deltaXYZ14 === 0) || (deltaXYZ12 ===0 && deltaXYZ14 > 0)) 
                            { push2Rotate(13,100,3,Y90);  }     
                }                     
            else if ( md13 === mu13 && md13 === -100 )   
                {        if ( (deltaXYZ12 < 0 && deltaXYZ14 === 0) || (deltaXYZ12 === 0 && deltaXYZ14 > 0) ) 
                            { push2Rotate(13,-100,1,Y90); }
                    else if ( (deltaXYZ12 > 0 && deltaXYZ14 === 0) || (deltaXYZ12 === 0 && deltaXYZ14 < 0) ) 
                            { push2Rotate(13,-100,1,Yn90); }     
                }
            // ---------------------------------------------------- 
            else if ( md14 === mu14 && md14 === 100 )   
                {        
                    if ( (deltaXYZ12 > 0 && deltaXYZ13 ===0) || (deltaXYZ12 ===0 && deltaXYZ13 < 0) )
                            { push2Rotate(14,100,1,Z90); }
                    else if ( (deltaXYZ12 < 0 && deltaXYZ13 ===0) || (deltaXYZ12 ===0 && deltaXYZ13 > 0) )
                            { push2Rotate(14,100,1,Zn90);  }     
                }
            else if ( md14 === mu14 && md14 === 0 )   
                {        
                    if ( (deltaXYZ12 > 0 && deltaXYZ13 ===0) || (deltaXYZ12 ===0 && deltaXYZ13 < 0) )
                            { push2Rotate(14,100,3,Z90); }
                    else if ( (deltaXYZ12 < 0 && deltaXYZ13 ===0) || (deltaXYZ12 ===0 && deltaXYZ13 > 0) )
                            { push2Rotate(14,100,3,Zn90);  }     
                }
            else if ( md14 === mu14 && md14 === -100 )   
                {        
                    if ( (deltaXYZ12 > 0 && deltaXYZ13 === 0) || (deltaXYZ12 ===0 && deltaXYZ13 < 0) )
                            { push2Rotate(14,-100,1,Z90); }
                    else if ( (deltaXYZ12 < 0 && deltaXYZ13 === 0) || (deltaXYZ12 ===0 && deltaXYZ13 > 0) )
                            { push2Rotate(14,-100,1,Zn90); }                
                };
        }
    }
// ===== mouse rotation control =====================================================================
    // mouse drage (click and move) -- 1-layer face move
    function mouseDownEvent (e) {
        e.preventDefault();
        e.stopPropagation();
        $("#cube").append($("<div></div>").attr('id','foo').addClass("fooClass"));
        $('#foo').css('-transform',$(e.target.parentNode).css('-transform') + $(e.target).css('-transform') );
        tempXYZMouseDown = $('#foo').css('-transform').split(',');  // to be used in the next mouseUpEvent
        $('#foo').remove();
    }
    document.getElementById("cube").addEventListener("mousedown",mouseDownEvent,false);

    function mouseUpEvent (e) {
        e.preventDefault();
        e.stopPropagation();
        $("#cube").append($("<div></div>").attr('id','foo').addClass("fooClass"));
        $('#foo').css('-transform',$(e.target.parentNode).css('-transform') + $(e.target).css('-transform') );
        tempXYZMouseUp = $('#foo').css('-transform').split(',');
        $('#foo').remove();
        // do facemoves according to relationship between up/down target elements
        getSwipeClockwiseAndMove (tempXYZMouseDown, tempXYZMouseUp);
    }
    document.getElementById("cube").addEventListener("mouseup",mouseUpEvent,false);
    //----------------------------------------------------------------------------------------------
    // 2 layer rotation control -- mouse click button and swipe out of the button
    function mouseDownEvent2Layer (e) {
        e.preventDefault();
        e.stopPropagation();
        tempXYZMouseDownId= $(e.target).attr('id');
    }
    function mouseUpEvent2Layer (e) {
        e.preventDefault();
        e.stopPropagation();
        tempXYZMouseUpId= $(e.target).attr('id');
        if (tempXYZMouseDownId != tempXYZMouseUpId  && lockState === "unLocked" ) {
            document.getElementById(tempXYZMouseDownId + "2").click();
        }
    }
    document.getElementById("faceMoveControl").addEventListener("mousedown",mouseDownEvent2Layer,false);
    document.getElementById("faceMoveControl").addEventListener("mouseup",mouseUpEvent2Layer,false);
        
// ====== touch rotation ================================================================
    //----------------------------------------------------------------------------------------
    function getTouches(e) {
        return e.touches || e.originalEvent.touches;   // browser API || jQuery
    } 
    function touchDownEvent (e) {
        // e.preventDefault();
        e.stopPropagation();
        const firstTouch = getTouches(e)[0];
        var elmParent = firstTouch.target.parentNode;
        var elm = firstTouch.target;
        $("#cube").append($("<div></div>").attr('id','foo').addClass("fooClass"));
        $('#foo').css('-transform',$(elmParent).css('-transform') + $(elm).css('-transform') );
        tempXYZTouchDown = $('#foo').css('-transform').split(',');
        $('#foo').remove();
    }
    document.getElementById("cube").addEventListener("touchstart",touchDownEvent,false);

    function touchUpEvent (e) {
        e.preventDefault();
        e.stopPropagation();
        var xUp = e.touches[0].clientX;
        var yUp = e.touches[0].clientY;
        var elmParent = document.elementFromPoint(xUp, yUp).parentNode;
        var elm = document.elementFromPoint(xUp, yUp);
        $("#cube").append($("<div></div>").attr('id','foo').addClass("fooClass"));
        $('#foo').css('-transform',$(elmParent).css('-transform') + $(elm).css('-transform') );
        tempXYZTouchUp = $('#foo').css('-transform').split(',');
        $('#foo').remove();        
        // do facemoves according to relationship between up/down target elements
        getSwipeClockwiseAndMove (tempXYZTouchDown, tempXYZTouchUp);
    }
    document.getElementById("cube").addEventListener("touchmove",touchUpEvent,false);
    //----------------------------------------------------------------------------------------------
    // 2 layer rotation control -- touch
    function touchDownEvent2Layer (e) {
        // e.preventDefault();
        e.stopPropagation();
        const firstTouch = getTouches(e)[0];
        var elm = firstTouch.target;
        tempXYZTouchDownId = $(elm).attr('id');
    }
    function touchUpEvent2Layer (e) {
        e.preventDefault();
        e.stopPropagation();
        var xUp = e.touches[0].clientX;
        var yUp = e.touches[0].clientY;
        var elm = document.elementFromPoint(xUp, yUp);
        tempXYZTouchUp = $(elm).attr('id');
        if ( tempXYZTouchDownId != tempXYZTouchUp && lockState === "unLocked" ) {
            document.getElementById(tempXYZTouchDownId + "2").click();
        }
    }
    document.getElementById("faceMoveControl").addEventListener("touchstart",touchDownEvent2Layer,false);
    document.getElementById("faceMoveControl").addEventListener("touchmove",touchUpEvent2Layer,false);
//------- animation by anime.js --------------------------------------------------------------------------
    function flyInText() {
        // $("#mainTable").append($("<div></div>").addClass("flyInText"));
        $("body").append($("<div></div>").addClass("flyInText"));
        $(".flyInText").append($("<div></div>").addClass("flyInTextXX flyText1").text(".Congratulation."));
        $(".flyInText").append($("<div></div>").addClass("flyInTextXX flyText2").text(".おめでとう."));
        $(".flyInText").append($("<div></div>").addClass("flyInTextXX flyText3").text(".Toutes nos félicitations."));
        $(".flyInText").append($("<div></div>").addClass("flyInTextXX flyText4").text(".Felicidades."));

        zoomIn = [0.2, 0.9]; zoomOut = [1, 0];
        flyIn = 150; flyOut = 1000;
        delay = 350;
        anime.timeline({loop: false})
            .add({ targets:'.flyInText .flyText1', opacity: 1, scale:zoomIn, duration:flyIn, zIndex:{value:5} })
            .add({ targets:'.flyInText .flyText1', opacity: 0, scale:zoomOut, duration:flyOut, easing:"easeInExpo", delay:delay, zIndex:{value:5} })
            // .add({ targets:'.flyInText .flyText1', opacity: [1,0], scale:1, duration:flyIn, easing:"easeInExpo", delay:delay, zIndex:{value:5} })

            .add({ targets:'.flyInText .flyText2', opacity: 1, scale:zoomIn, duration:flyIn, zIndex:{value:5} })
            .add({ targets:'.flyInText .flyText2', opacity: 0, scale:zoomOut, duration:flyOut, easing:"easeInExpo", delay:delay, zIndex:{value:5} })

            .add({ targets:'.flyInText .flyText3', opacity: 1, scale:zoomIn,duration:flyIn, zIndex:{value:5} })
            .add({ targets:'.flyInText .flyText3', opacity: 0, scale:zoomOut,duration:flyOut, easing:"easeInExpo", delay:delay, zIndex:{value:5} })
            
            .add({ targets:'.flyInText .flyText4', opacity: 1, scale:zoomIn, duration:flyIn, zIndex:{value:5} })
            .add({ targets:'.flyInText .flyText4', opacity: 0, scale:zoomOut, duration:flyOut, easing:"easeInExpo", delay:delay, zIndex:{value:5} })

            .add({ targets:'.flyInText .flyText5', opacity: 1, scale:zoomIn, duration:flyIn, zIndex:{value:5} })
            .add({ targets:'.flyInText .flyText5', opacity: 0, scale:zoomOut, duration:flyOut, easing:"easeInExpo", delay:delay, zIndex:{value:5} })

            .add({ targets:'.flyInText .flyText6', opacity: 1, scale:zoomIn, duration:flyIn, zIndex:{value:5} })
            .add({ targets:'.flyInText .flyText6', opacity: 0, scale:zoomOut, duration:flyOut, easing:"easeInExpo", delay:delay, zIndex:{value:5} })

            .add({ targets:'.flyInText', opacity:0, duration:flyOut, delay:delay, 
                    complete: function(anim){
                        anime.remove( ".flyInText .flyText1" ); anime.remove( ".flyInText .flyText2" );
                        anime.remove( ".flyInText .flyText3" ); anime.remove( ".flyInText .flyText4" );
                        anime.remove( ".flyInText .flyText5" ); anime.remove( ".flyInText .flyText6" );
                        anime.remove( ".flyInText" );
                        $('.flyInText').remove();
                    }
                });
    };
    // ----------------- buuble animatioin ---------------------------------------------------------------
    bubbleCounter = 1;
    function bubbleGenerator() {        
        const section = document.querySelector('section');
        const bubbleSpan = document.createElement('span');
        var size = Math.random() * 60;
        bubbleSpan.style.width = 20 + size + 'px';
        bubbleSpan.style.height = 20 + size + 'px';
        bubbleSpan.style.left = Math.random()*(innerWidth-80) + 'px';
        section.appendChild(bubbleSpan);
        setTimeout( () => {bubbleSpan.remove()},4000);
        bubbleCounter ++;
        if (bubbleCounter > 200) {clearInterval(bubblingEvent); }
    }
    function startBubbling() {
        bubblingEvent = setInterval(bubbleGenerator,5);
    }
    
</script>
</body>
</html>
